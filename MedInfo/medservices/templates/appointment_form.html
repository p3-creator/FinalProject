{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'css/appointment_form.css' %}">
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script> -->
    <script src="{% static 'js/jquery-2.1.4.min.js' %}"></script>
    <script>
        $(document).ready(function()
        {
            var $select_spec =$('#select_spec'),
                $select_doc = $('#select_doc'),
               // $selected_doc = $('#selected_doc')
                $options = $select_doc.find('option');
                $select_spec.on('change',function(){
                   
                 $myres = $select_doc.html($options.filter('[value="'+this.value+'"]'));
                console.log($myres.text())
            // $selected_doc.text($myres.text())
                }).trigger('change') ; 

                
                
        });

        $(document).ready(function()
        {
            var $select_spec =$('#select_spec'),
                $select_doc_id = $('#select_doc_id'),
                $selected_doc = $('#selected_doc')
                $options = $select_doc_id.find('option');
                $select_spec.on('change',function(){
                
                 $res = $select_doc_id.html($options.filter('[value="'+this.value+'"]'));
                 console.log($res.text())
             $selected_doc.text($res.text())
                }).trigger('change') ; 

                
                
        });

        



      

    </script>
    <title>Appointment Form</title>
</head>
<body>

    <nav>
        <label class="logo">MedInfo</label>
        <ul>
            {% if patient %}
              <li><a class="username">Welcome {{patient.admin.username}}</a></li>
                <li><a href="/user_profile">View Profile</a></li>
              <li><a href="/logout_user" class="right">Logout</a></li>
            {% else %}
                <li><a href="/chooseregister">Register</a></li>
                <li><a href="/login">Login</a></li>
            {% endif %}

        </ul>
    </nav>

            

    <div class="container">



        <form class="register-email" action="appointment_choosedatetime/" method="POST">
            <p class="register-text">Appointment Form</p>
            {% csrf_token %}
            <input type="hidden" name ="h_id" id="h_id" value = {{hospital.admin_id}}>
            
            <div>
                <select name="category_spec" value="category" class="select-box" id ="select_spec" required>

                <!-- <option selected disabled ="true" required></option>

                <label for="Speciality"><b>Choose Speciality</b></label> -->
                 {% for spec in speciality_list %} 
                 
                   <option class= "option"  value="{{spec}}" >{{spec}}</option>
                
                   
                 {% endfor %}
                                            
                </select>
            </div>
            <br>
            

            <div>
                <select name="category_doc" value="category" class="select-box" id ="select_doc" required>

                 {% if doctor %}
                    {% for doc in doctor %}
                   
                    <option class= "option"  value="{{doc.specialities}}">{{doc.admin.first_name}} {{doc.admin.last_name}}</option>
                  
                   
                    {% endfor %}
                    
                  {% endif %} 

                </select>

                <select name="category_doc" value="category" class="select-box" id ="select_doc_id" required>

                    {% if doctor %}
                       {% for doc in doctor %}
                      
                       <option class= "option"  value="{{doc.specialities}}">{{doc.id}}</option>
                     
                      
                       {% endfor %}
                       
                     {% endif %} 
   
                   </select>
                
            </div>

            <textarea type="text" name="doc" id="selected_doc"></textarea>
           


            <!-- <div class="input-all">
                <input type="date" placeholder="Enter Date" name="date" required>
            </div>

            <div>
                <select name="timeslot" value="timeslot" class="select-box" id ="select_appointment">

                 {% if appointment_time %}
                     {% for app in appointment_time %}
                        
                    
                        <option class= "option" value="{{app.doctor_id.admin.first_name}} {{app.doctor_id.admin.last_name}}">{{app.start_time}}-{{app.end_time}}-{{app.time_slot}}</option>
                        
                     {% endfor %}
                        
                  {% endif %} 

                </select>
            </div>

            

            <div class="input-all">
                <input type="text"  name="name" readonly value=" patient name : {{patient.admin.first_name}} {{patient.admin.last_name}}">
            </div>

    
            <div class="row">

                <div class="input-all">
                    <input type="text" placeholder="Address" name="address" value = "address : {{patient.address}}">
                </div>

                <div class="input-all">
                    <input type="tel" id="phone" placeholder="Phone Number" name="phone" value = "phone number : {{patient.phone}}">
                </div>

                <div class="input-all">
                    <input type="number" placeholder="Total Amount" name="amount" required>
                </div>
             <br>
             <br>
            </div> -->
           
             <div class="input-all">
                <button class="register-btn">Proceed to next step</button>
            </div>

            <div>
                {% if messages %}
                   <ul class="messages">
                   {% for msg in messages %}
                   
                   <div class="alert alert-{{msg.tags}}" role="alert" style="margin: 10px;border:solid red;border-radius: 10px;color:black;padding:6px">
                   {{msg.message}}
                   </div>
                   
                   {% endfor %}
                   </ul>
                   {% endif %}
               </div>
               
        </form>
    </div>

  
    
</body>
</html>















 <!-- {% for spec in speciality_list %}

<h2>{{spec}}</h2>

{% endfor %}

{% if doctor %}
{% for doc in doctor %}

<h2>{{doc.specialities}} {{doc.admin.last_name}}</h2>

{% endfor %}

{% endif %}  -->





















